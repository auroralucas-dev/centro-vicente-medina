<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Centro Vicente Medina — Contacto</title>

  <!-- Bootstrap 5.3 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    :root{ --main-font-size: 16px; }
    body{ font-size: var(--main-font-size); padding-top: 72px; }

    .btn-font{
      border: 1px solid rgba(255,255,255,.35);
      color:#fff;
      background: transparent;
    }
    .btn-font:hover{
      background: rgba(255,255,255,.08);
      border-color: rgba(255,255,255,.55);
    }

    /* Errores debajo del campo */
    .field-error{
      display:none;
      color:#b02a37;
      font-size: .9rem;
      margin-top: .35rem;
    }
    .is-invalid + .field-error{ display:block; }

    footer{
      background:#1f2428;
      color:#fff;
    }
    footer a{ color:#cfe8ff; }
    footer a:hover{ color:#ffffff; }

    /* Contador */
    .counter{
      font-size: .9rem;
      color: #6c757d;
    }
    .counter strong{ color:#212529; }
  </style>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
  <div class="container">
    <a class="navbar-brand fw-semibold" href="index.html">Centro Vicente Medina</a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMain"
      aria-controls="navMain" aria-expanded="false" aria-label="Abrir menú">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navMain" class="collapse navbar-collapse">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link" href="index.html">Portada</a></li>
        <li class="nav-item"><a class="nav-link" href="cursos.html">Cursos</a></li>

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Cursos individuales
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="curso-control-plagas.html">Control de plagas</a></li>
            <li><a class="dropdown-item" href="curso-organismos-nocivos.html">Organismos nocivos</a></li>
            <li><a class="dropdown-item" href="curso-legionella.html">Legionella</a></li>
          </ul>
        </li>

        <li class="nav-item"><a class="nav-link" href="profesorado.html">Profesorado</a></li>
        <li class="nav-item"><a class="nav-link active" aria-current="page" href="contacto.html">Contacto</a></li>
      </ul>

      <div class="d-flex gap-2">
        <button id="btnAminus" class="btn btn-sm btn-font" type="button" aria-label="Disminuir tamaño de texto">A-</button>
        <button id="btnAplus" class="btn btn-sm btn-font" type="button" aria-label="Aumentar tamaño de texto">A+</button>
      </div>
    </div>
  </div>
</nav>

<main id="mainContent" class="container py-5">
  <div class="row justify-content-center">
    <div class="col-12 col-lg-8">
      <h1 class="display-6 fw-bold mb-2">Contacto</h1>
      <p class="text-muted mb-4">
        Rellena el formulario y te responderemos lo antes posible. (Validación al perder el foco)
      </p>

      <!-- Mensaje de éxito -->
      <div id="successBox" class="alert alert-success d-none" role="alert">
        ✅ ¡Formulario enviado correctamente! Gracias por contactar con el Centro Vicente Medina.
      </div>

      <form id="contactForm" novalidate>
        <div class="row g-3">
          <!-- Nombre -->
          <div class="col-12 col-md-6">
            <label for="nombre" class="form-label fw-semibold">Nombre y apellidos</label>
            <input type="text" class="form-control" id="nombre" name="nombre" placeholder="Ej.: Aurora Lucas del Río" required>
            <div class="field-error">Introduce tu nombre (mínimo 3 caracteres).</div>
          </div>

          <!-- Email -->
          <div class="col-12 col-md-6">
            <label for="correo" class="form-label fw-semibold">Correo electrónico</label>
            <input type="email" class="form-control" id="correo" name="correo" placeholder="nombre@ejemplo.com" required>
            <div class="field-error">Introduce un email válido (ej.: nombre@dominio.com).</div>
          </div>

          <!-- Temática -->
          <div class="col-12">
            <label for="tematica" class="form-label fw-semibold">Temática</label>
            <select class="form-select" id="tematica" name="tematica" required>
              <option value="">Selecciona una opción…</option>
              <option value="informacion">Información general</option>
              <option value="matricula">Matrícula / Inscripción</option>
              <option value="cursos">Cursos y contenidos</option>
              <option value="practicas">Prácticas / Empleo</option>
              <option value="soporte">Soporte técnico</option>
            </select>
            <div class="field-error">Selecciona una temática.</div>
          </div>

          <!-- Mensaje -->
          <div class="col-12">
            <label for="mensaje" class="form-label fw-semibold">Mensaje</label>
            <textarea class="form-control" id="mensaje" name="mensaje" rows="6"
              placeholder="Escribe tu consulta con detalle (mínimo 30 caracteres)…" required></textarea>

            <div class="d-flex justify-content-between align-items-center mt-2">
              <div class="field-error mb-0">El mensaje debe tener al menos 30 caracteres.</div>
              <div class="counter" aria-live="polite">
                Caracteres: <strong id="charCount">0</strong> / 30
              </div>
            </div>
          </div>

          <!-- Botón -->
          <div class="col-12 d-flex gap-2">
            <button type="submit" class="btn btn-primary">Enviar</button>
            <button type="reset" class="btn btn-outline-secondary">Limpiar</button>
          </div>
        </div>
      </form>

      <hr class="my-5">

      <div class="small text-muted">
        <strong>Nota:</strong> Este formulario está validado con eventos <code>blur</code> y contador en tiempo real
        (JS/jQuery), según el enunciado.
      </div>
    </div>
  </div>
</main>

<footer class="py-4 mt-5">
  <div class="container">
    <div class="row gy-3 align-items-center">
      <div class="col-md-8">
        <div class="fw-semibold">© 2026 Centro de estudios Vicente Medina</div>
        <div>Administradora: Aurora Lucas del Río</div>
        <div class="small">
          <a href="#" onclick="return false;">Aviso legal</a> ·
          <a href="#" onclick="return false;">Política de accesibilidad</a>
        </div>
      </div>
      <div class="col-md-4 text-md-end">
        <div class="small">Fecha y hora:</div>
        <div id="clock" class="fw-semibold"></div>
      </div>
    </div>
  </div>
</footer>

<!-- jQuery + Bootstrap -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
  // ======================
  // A- / A+ (tamaño texto)
  // ======================
  let fontSize = 16;
  const minSize = 14, maxSize = 20;
  function applyFontSize(){
    document.documentElement.style.setProperty("--main-font-size", fontSize + "px");
  }
  document.getElementById("btnAminus").addEventListener("click", () => {
    fontSize = Math.max(minSize, fontSize - 1);
    applyFontSize();
  });
  document.getElementById("btnAplus").addEventListener("click", () => {
    fontSize = Math.min(maxSize, fontSize + 1);
    applyFontSize();
  });

  // =============
  // Reloj footer
  // =============
  function updateClock(){
    const now = new Date();
    const options = {
      weekday:"long", year:"numeric", month:"2-digit", day:"2-digit",
      hour:"2-digit", minute:"2-digit", second:"2-digit"
    };
    document.getElementById("clock").textContent = now.toLocaleString("es-ES", options);
  }
  updateClock();
  setInterval(updateClock, 1000);

  // ======================
  // Validación (blur + submit)
  // ======================
  const MIN_MSG = 30;
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;

  function setInvalid($el, invalid){
    $el.toggleClass("is-invalid", invalid);
    $el.toggleClass("is-valid", !invalid);
  }

  function validateNombre(){
    const $n = $("#nombre");
    const v = $n.val().trim();
    const invalid = v.length < 3;
    setInvalid($n, invalid);
    return !invalid;
  }

  function validateCorreo(){
    const $c = $("#correo");
    const v = $c.val().trim();
    const invalid = !emailRegex.test(v);
    setInvalid($c, invalid);
    return !invalid;
  }

  function validateTematica(){
    const $t = $("#tematica");
    const invalid = $t.val() === "";
    setInvalid($t, invalid);
    return !invalid;
  }

  function validateMensaje(){
    const $m = $("#mensaje");
    const v = $m.val();
    const invalid = v.trim().length < MIN_MSG;
    setInvalid($m, invalid);
    return !invalid;
  }

  // Validación al perder foco (blur)
  $("#nombre").on("blur", validateNombre);
  $("#correo").on("blur", validateCorreo);
  $("#tematica").on("blur change", validateTematica);
  $("#mensaje").on("blur", validateMensaje);

  // Contador en tiempo real
  $("#mensaje").on("input", function(){
    const len = $(this).val().length;
    $("#charCount").text(len);
  });

  // Submit: si hay errores, impedir envío; si OK, mostrar éxito
  $("#contactForm").on("submit", function(e){
    e.preventDefault();

    const ok =
      validateNombre() &
      validateCorreo() &
      validateTematica() &
      validateMensaje();

    if(!ok){
      $("#successBox").addClass("d-none");
      // Llevar al primer error
      const $firstInvalid = $(".is-invalid").first();
      if($firstInvalid.length){
        $firstInvalid.trigger("focus");
      }
      return;
    }

    // Simulación de envío (no recarga)
    $("#successBox").removeClass("d-none");
    this.reset();
    $("#charCount").text("0");
    $(".is-valid").removeClass("is-valid");
  });

  // Reset: limpiar estados visuales
  $("#contactForm").on("reset", function(){
    setTimeout(() => {
      $(".is-valid, .is-invalid").removeClass("is-valid is-invalid");
      $("#successBox").addClass("d-none");
      $("#charCount").text("0");
    }, 0);
  });
</script>

</body>
</html>
